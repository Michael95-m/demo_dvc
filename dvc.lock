schema: '2.0'
stages:
  get_data:
    cmd: python src/stages/data_get.py --config=params.yaml
    deps:
    - path: src/stages/data_get.py
      md5: 40162404985b3cdcbc617f95b0e2b0dd
      size: 1302
    - path: src/stages/utils/log.py
      md5: ec6d9907a691aa06324ad985951b4128
      size: 625
    params:
      params.yaml:
        base:
          random_state: 42
          log_level: INFO
        data_load:
          dataset_zip: health-dataset.zip
          dataset_folder: data/raw
          dataset_csv: data/raw/diabetes_data.csv
    outs:
    - path: data/raw/diabetes_data.csv
      md5: 9a9161518e3622deaa5655b42a2a197b
      size: 5287141
    - path: health-dataset.zip
      md5: aa113db36a5123a20a1cb416d749b130
      size: 1050035
  process_data:
    cmd: python src/process_data.py
    deps:
    - path: health_data/diabetes_data.csv
      md5: 9a9161518e3622deaa5655b42a2a197b
      size: 5287141
    - path: src/process_data.py
      md5: d345803603db975791616971274ae166
      size: 449
    outs:
    - path: Processed_data.csv
      md5: bec80b6142f1c2df04c60b9ab3f75c2d
      size: 4368119
  train:
    cmd: python src/stages/train.py --config params.yaml
    deps:
    - path: data/processed/train.csv
      md5: 6a5c7defbd522ec508be4464727ccb5e
      size: 3453410
    - path: src/stages/train.py
      md5: 24bb799f50cee1746fcfa9e396e669d9
      size: 1745
    - path: src/stages/utils/log.py
      md5: ec6d9907a691aa06324ad985951b4128
      size: 625
    - path: src/stages/utils/train.py
      md5: 747e8def151638d981c72ccdda0436b9
      size: 1334
    params:
      params.yaml:
        data_split:
          test_size: 0.3
          trainset_path: data/processed/train.csv
          testset_path: data/processed/test.csv
        featurize:
          feature_folder: data/processed
          features_path: data/processed/featured_data.csv
          drop_features:
          - Veggies
          target_column: Diabetes
        train:
          cv: 3
          estimator_name: logreg
          estimators:
            logreg:
              param_grid:
                C:
                - 0.1
                max_iter:
                - 200
                solver:
                - lbfgs
                multi_class:
                - multinomial
            knn:
              param_grid:
                n_neighbors:
                - 1
                - 3
                - 5
                - 7
                - 9
          model_folder: model
          model_path: model/model.joblib
          scaler_path: model/scaler.joblib
    outs:
    - path: model/model.joblib
      md5: fb0dd46720ab5aa53b94a3f327bc24fd
      size: 3150
    - path: model/scaler.joblib
      md5: 034384424b5bd54ec590a37f4caf3f8f
      size: 1606
  featurize:
    cmd: python src/stages/feature_select.py --config params.yaml
    deps:
    - path: data/raw/diabetes_data.csv
      md5: 9a9161518e3622deaa5655b42a2a197b
      size: 5287141
    - path: src/stages/feature_select.py
      md5: 6fd9640f7e4aaa9ae2f81d0476a276ae
      size: 970
    - path: src/stages/utils/log.py
      md5: ec6d9907a691aa06324ad985951b4128
      size: 625
    params:
      params.yaml:
        data_load:
          dataset_zip: health-dataset.zip
          dataset_folder: data/raw
          dataset_csv: data/raw/diabetes_data.csv
        featurize:
          feature_folder: data/processed
          features_path: data/processed/featured_data.csv
          drop_features:
          - Veggies
          target_column: Diabetes
    outs:
    - path: data/processed/featured_data.csv
      md5: d4027581f861aab6fe57755ab8fbfb95
      size: 4933672
  data_split:
    cmd: python src/stages/data_split.py --config params.yaml
    deps:
    - path: data/processed/featured_data.csv
      md5: d4027581f861aab6fe57755ab8fbfb95
      size: 4933672
    - path: src/stages/data_split.py
      md5: 9fcc6fdc4a61f04352b8f5d6653283ee
      size: 1164
    - path: src/stages/utils/log.py
      md5: ec6d9907a691aa06324ad985951b4128
      size: 625
    params:
      params.yaml:
        base:
          random_state: 42
          log_level: INFO
        data_split:
          test_size: 0.3
          trainset_path: data/processed/train.csv
          testset_path: data/processed/test.csv
        featurize:
          feature_folder: data/processed
          features_path: data/processed/featured_data.csv
          drop_features:
          - Veggies
          target_column: Diabetes
    outs:
    - path: data/processed/test.csv
      md5: 55384cfd635be459af11e2738b3d5fd5
      size: 1480417
    - path: data/processed/train.csv
      md5: 6a5c7defbd522ec508be4464727ccb5e
      size: 3453410
  evaluate:
    cmd: python src/stages/evaluate.py --config params.yaml
    deps:
    - path: data/processed/test.csv
      md5: 55384cfd635be459af11e2738b3d5fd5
      size: 1480417
    - path: model/model.joblib
      md5: fb0dd46720ab5aa53b94a3f327bc24fd
      size: 3150
    - path: model/scaler.joblib
      md5: 034384424b5bd54ec590a37f4caf3f8f
      size: 1606
    - path: src/stages/evaluate.py
      md5: d3a78f28c3e8296fe0f27558c315118f
      size: 2233
    - path: src/stages/utils/evaluate.py
      md5: d44f180f6e728dbefa1636c5b04e299d
      size: 1437
    - path: src/stages/utils/log.py
      md5: ec6d9907a691aa06324ad985951b4128
      size: 625
    params:
      params.yaml:
        data_split:
          test_size: 0.3
          trainset_path: data/processed/train.csv
          testset_path: data/processed/test.csv
        evaluate:
          report_folder: report
          accuracy_report_path: report/report.json
          confusion_matrix_path: report/confusion_matrix.png
          translated_report_path: report/confusion_matrix_data.csv
          target_names:
          - no_diabetes
          - diabetes
        featurize:
          feature_folder: data/processed
          features_path: data/processed/featured_data.csv
          drop_features:
          - Veggies
          target_column: Diabetes
        train:
          cv: 3
          estimator_name: logreg
          estimators:
            logreg:
              param_grid:
                C:
                - 0.1
                max_iter:
                - 200
                solver:
                - lbfgs
                multi_class:
                - multinomial
            knn:
              param_grid:
                n_neighbors:
                - 1
                - 3
                - 5
                - 7
                - 9
          model_folder: model
          model_path: model/model.joblib
          scaler_path: model/scaler.joblib
    outs:
    - path: report/confusion_matrix.png
      md5: ff15a829f98731ab013bbdd593fcb855
      size: 24622
    - path: report/confusion_matrix_data.csv
      md5: 974f4d26ac0d94a9c2bfe734741fe39a
      size: 443768
    - path: report/report.json
      md5: 69a5aa1c60f000fd5e0b79483a5ee825
      size: 74
