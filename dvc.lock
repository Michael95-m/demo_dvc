schema: '2.0'
stages:
  get_data:
    cmd: python src/stages/data_get.py --config=params.yaml
    deps:
    - path: src/stages/data_get.py
      md5: 40162404985b3cdcbc617f95b0e2b0dd
      size: 1302
    - path: src/stages/utils/log.py
      md5: ec6d9907a691aa06324ad985951b4128
      size: 625
    params:
      params.yaml:
        base:
          random_state: 42
          log_level: INFO
        data_load:
          dataset_zip: health-dataset.zip
          dataset_folder: data/raw
          dataset_csv: data/raw/diabetes_data.csv
    outs:
    - path: data/raw/diabetes_data.csv
      md5: 9a9161518e3622deaa5655b42a2a197b
      size: 5287141
    - path: health-dataset.zip
      md5: aa113db36a5123a20a1cb416d749b130
      size: 1050035
  process_data:
    cmd: python src/process_data.py
    deps:
    - path: health_data/diabetes_data.csv
      md5: 9a9161518e3622deaa5655b42a2a197b
      size: 5287141
    - path: src/process_data.py
      md5: d345803603db975791616971274ae166
      size: 449
    outs:
    - path: Processed_data.csv
      md5: bec80b6142f1c2df04c60b9ab3f75c2d
      size: 4368119
  train:
    cmd: python src/stages/train.py --config params.yaml
    deps:
    - path: data/processed/train.csv
      md5: 963b85eb6616b4f262fbd51962e6d49e
      size: 3742507
    - path: src/stages/train.py
      md5: 351f8e813af93df121b98682995300a1
      size: 1731
    - path: src/stages/utils/log.py
      md5: ec6d9907a691aa06324ad985951b4128
      size: 625
    - path: src/stages/utils/train.py
      md5: c2e27fae31346c168cc053c705b7e4e4
      size: 1259
    params:
      params.yaml:
        data_split:
          test_size: 0.3
          trainset_path: data/processed/train.csv
          testset_path: data/processed/test.csv
        featurize:
          feature_folder: data/processed
          features_path: data/processed/featured_data.csv
          drop_features:
          - Veggies
          target_column: Diabetes
        train:
          cv: 3
          estimator_name: logreg
          estimators:
            logreg:
              param_grid:
                C:
                - 0.001
                max_iter:
                - 100
                solver:
                - lbfgs
                multi_class:
                - multinomial
          model_folder: model
          model_path: model/model.joblib
          scaler_path: model/scaler.joblib
    outs:
    - path: model/model.joblib
      md5: 86c8889f84d6314a76ceae0478bc1873
      size: 3166
    - path: model/scaler.joblib
      md5: 100ea0768b57621eca4200adc453ce7d
      size: 1630
  featurize:
    cmd: python src/stages/feature_select.py --config params.yaml
    deps:
    - path: data/raw/diabetes_data.csv
      md5: 9a9161518e3622deaa5655b42a2a197b
      size: 5287141
    - path: src/stages/feature_select.py
      md5: cbbd74b823a2e592aed66a60d99761cf
      size: 941
    - path: src/stages/utils/log.py
      md5: ec6d9907a691aa06324ad985951b4128
      size: 625
    params:
      params.yaml:
        data_load:
          dataset_zip: health-dataset.zip
          dataset_folder: data/raw
          dataset_csv: data/raw/diabetes_data.csv
        featurize:
          feature_folder: data/processed
          features_path: data/processed/featured_data.csv
          drop_features:
          - Veggies
          target_column: Diabetes
    outs:
    - path: data/processed/featured_data.csv
      md5: d4027581f861aab6fe57755ab8fbfb95
      size: 4933672
  data_split:
    cmd: python src/stages/data_split.py --config params.yaml
    deps:
    - path: data/processed/featured_data.csv
      md5: d4027581f861aab6fe57755ab8fbfb95
      size: 4933672
    - path: src/stages/data_split.py
      md5: 9f23e94930b827bb7467e6778b31a4bd
      size: 910
    - path: src/stages/utils/log.py
      md5: ec6d9907a691aa06324ad985951b4128
      size: 625
    params:
      params.yaml:
        base:
          random_state: 42
          log_level: INFO
        data_split:
          test_size: 0.3
          trainset_path: data/processed/train.csv
          testset_path: data/processed/test.csv
        featurize:
          feature_folder: data/processed
          features_path: data/processed/featured_data.csv
          drop_features:
          - Veggies
          target_column: Diabetes
    outs:
    - path: data/processed/test.csv
      md5: 93aec962fccd595916b5f99b52ece2ad
      size: 1604364
    - path: data/processed/train.csv
      md5: 963b85eb6616b4f262fbd51962e6d49e
      size: 3742507
  evaluate:
    cmd: python src/stages/evaluate.py --config params.yaml
    deps:
    - path: data/processed/test.csv
      md5: 93aec962fccd595916b5f99b52ece2ad
      size: 1604364
    - path: model/model.joblib
      md5: 86c8889f84d6314a76ceae0478bc1873
      size: 3166
    - path: model/scaler.joblib
      md5: 100ea0768b57621eca4200adc453ce7d
      size: 1630
    - path: src/stages/evaluate.py
      md5: e292ed17c142b0e47f1bea72c496e740
      size: 2004
    - path: src/stages/utils/evaluate.py
      md5: 62cde71e19e64a5b79883820ba0ee59c
      size: 1018
    - path: src/stages/utils/log.py
      md5: ec6d9907a691aa06324ad985951b4128
      size: 625
    params:
      params.yaml:
        data_split:
          test_size: 0.3
          trainset_path: data/processed/train.csv
          testset_path: data/processed/test.csv
        evaluate:
          report_folder: report
          accuracy_report_path: report/report.json
          confusion_matrix_path: report/confusion_matrix.png
          target_names:
          - Diabetic
          - Non diabetic
        featurize:
          feature_folder: data/processed
          features_path: data/processed/featured_data.csv
          drop_features:
          - Veggies
          target_column: Diabetes
        train:
          cv: 3
          estimator_name: logreg
          estimators:
            logreg:
              param_grid:
                C:
                - 0.001
                max_iter:
                - 100
                solver:
                - lbfgs
                multi_class:
                - multinomial
          model_folder: model
          model_path: model/model.joblib
          scaler_path: model/scaler.joblib
    outs:
    - path: report/confusion_matrix.png
      md5: 5170e99a1c9cfd304a92340058ccd7ad
      size: 23771
    - path: report/report.json
      md5: b80796c1658d5b968314ce69253e637f
      size: 74
